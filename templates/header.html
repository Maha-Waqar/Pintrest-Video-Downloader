{% load i18n %}
{% load translate_urls %}

<!-- Header Section -->
<header class="header">
    <div class="header-container">
        <div class="logo-container">
            <a href="{% url 'home' %}" class="logo" style="text-decoration: none; color: inherit;">
                <div class="logo-icon">
                    <i class="fas fa-download"></i>
                </div>
                PinCatch
            </a>
        </div>
        <div class="header-controls">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="{% url 'home' %}"> {% trans "Home" %}</a></li>
                <li><a href="{% url 'imageDownloader' %}"> {% trans "Pinterest Image Downloader" %}</a></li>
                <li><a href="{% url 'gifDownloader' %}"> {% trans "Pinterest GIF Downloader" %}</a></li>       
                <li><a href="{% url 'blog' %}"> {% trans "Blog" %}</a></li>
                <li><a href="{% url 'about' %}"> {% trans "About" %}</a></li>
            </ul>
        </div>
        <!-- Language Dropdown -->
        {% get_current_language as CURRENT_LANGUAGE %}
        {% get_available_languages as AVAILABLE_LANGUAGES %}
        {% get_language_info_list for AVAILABLE_LANGUAGES as languages %}
        <div class="languages">
            <form action="{% url 'set_language' %}" method="post" class="language-form">
                {% csrf_token %}
                {% if request.GET.next %}
                    <input type="hidden" name="next" value="{{ request.GET.next }}">
                {% else %}
                    {% translate_url CURRENT_LANGUAGE request as translated_current_url %}
                    <input type="hidden" name="next" value="{{ translated_current_url }}">
                {% endif %}
                <div class="language-dropdown">
                    <button type="button" class="language-trigger" aria-haspopup="true" aria-expanded="false" aria-controls="language-menu">
                        <span class="language-label">{% trans "Language" %}</span>
                        <span class="language-current">{{ CURRENT_LANGUAGE|upper }}</span>
                        <i class="fas fa-chevron-down" aria-hidden="true"></i>
                    </button>
                    <ul class="language-menu" id="language-menu" role="menu" aria-hidden="true" hidden>
                        {% for language in languages %}
                            <li role="none">
                                <button type="submit"
                                        name="language"
                                        value="{{ language.code }}"
                                        class="language-option{% if language.code == CURRENT_LANGUAGE %} active{% endif %}"
                                        role="menuitem"
                                        data-language-code="{{ language.code }}"
                                        data-language-url="{% translate_url language.code request %}">
                                    {{ language.name_local }}
                                </button>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </form>
        </div>
    </div>
</header>


